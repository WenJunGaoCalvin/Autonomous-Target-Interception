<?xml version="1.0" ?>
<robot name="interceptor">
  <joint name="interceptor__interceptor__iris__iris/ground_truth/odometry_sensorgt_joint" type="fixed">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__iris/ground_truth/odometry_sensorgt_link"/>
    <origin xyz="0      0      0.19492" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="0.0" upper="0.0" effort="0.0" velocity="0.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris__iris/imu_joint" type="fixed">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__iris/imu_link"/>
    <origin xyz="0      0      0.19492" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="0.0" upper="0.0" effort="0.0" velocity="0.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris__rotor_0_joint" type="revolute">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__rotor_0"/>
    <origin xyz="0.13    -0.22     0.21792" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1e+16" upper="1e+16" effort="-1.0" velocity="-1.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris__rotor_1_joint" type="revolute">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__rotor_1"/>
    <origin xyz="-0.13     0.2      0.21792" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1e+16" upper="1e+16" effort="-1.0" velocity="-1.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris__rotor_2_joint" type="revolute">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__rotor_2"/>
    <origin xyz="0.13    0.22    0.21792" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1e+16" upper="1e+16" effort="-1.0" velocity="-1.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris__rotor_3_joint" type="revolute">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__iris__rotor_3"/>
    <origin xyz="-0.13    -0.2      0.21792" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1e+16" upper="1e+16" effort="-1.0" velocity="-1.0"/>
  </joint>
  <joint name="interceptor__interceptor__iris_gimbal_mount" type="fixed">
    <parent link="interceptor__interceptor__iris__base_link"/>
    <child link="interceptor__interceptor__ros_gimbal_small_2d__base_link"/>
    <origin xyz="0   -0.01  0.07" rpy="1.57 0   1.57"/>
    <axis xyz="0.0e+00 1.0e+00 7.9e-04"/>
    <limit lower="0.0" upper="0.0" effort="-1.0" velocity="-1.0"/>
  </joint>
  <joint name="interceptor__interceptor__ros_gimbal_small_2d__tilt_joint" type="revolute">
    <parent link="interceptor__interceptor__ros_gimbal_small_2d__base_link"/>
    <child link="interceptor__interceptor__ros_gimbal_small_2d__tilt_link"/>
    <origin xyz="0   0   0.02" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit lower="-0.1" upper="3.14159" effort="10.0" velocity="-1.0"/>
  </joint>
  <link name="interceptor__interceptor__iris__base_link">
    <inertial>
      <mass value="1.5"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.008" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.017"/>
    </inertial>
    <collision name="interceptor__base_link_collision">
      <origin xyz="0      0      0.11492" rpy="0 0 0"/>
      <geometry>
        <box size="0.47 0.47 0.23"/>
      </geometry>
    </collision>
    <visual name="interceptor__base_link_visual">
      <origin xyz="0      0      0.19492" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://iris_with_standoffs/meshes/iris.dae" scale="1.0 1.0 1.0"/>
      </geometry>
    </visual>
    <visual name="interceptor__front_left_leg_visual">
      <origin xyz="0.123   0.22    0.08492" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.005" length="0.17"/>
      </geometry>
    </visual>
    <visual name="interceptor__front_right_leg_visual">
      <origin xyz="0.123   -0.22     0.08492" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.005" length="0.17"/>
      </geometry>
    </visual>
    <visual name="interceptor__rear_left_leg_visual">
      <origin xyz="-0.14     0.21     0.08492" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.005" length="0.17"/>
      </geometry>
    </visual>
    <visual name="interceptor__rear_right_leg_visual">
      <origin xyz="-0.14    -0.21     0.08492" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.005" length="0.17"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__iris__iris/ground_truth/odometry_sensorgt_link">
    <inertial>
      <mass value="0.15"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0002" iyz="0" izz="0.0002"/>
    </inertial>
  </link>
  <link name="interceptor__interceptor__iris__iris/imu_link">
    <inertial>
      <mass value="0.15"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-05" ixy="0" ixz="0" iyy="2e-05" iyz="0" izz="2e-05"/>
    </inertial>
    <gazebo>
      <sensor name="interceptor__interceptor__iris__iris/imu_link__imu_sensor" type="imu">
        <pose>0 0 0 3.141593 0 0</pose>
        <always_on>1</always_on>
        <update_rate>1000.0</update_rate>
      </sensor>
  </gazebo>
  </link>
  <link name="interceptor__interceptor__iris__rotor_0">
    <inertial>
      <mass value="0.025"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="9.75e-06" ixy="0" ixz="0" iyy="0.000166704" iyz="0" izz="0.000167604"/>
    </inertial>
    <collision name="interceptor__rotor_0_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.1" length="0.005"/>
      </geometry>
    </collision>
    <visual name="interceptor__rotor_0_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://iris_with_standoffs/meshes/iris_prop_ccw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__iris__rotor_1">
    <inertial>
      <mass value="0.025"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="9.75e-06" ixy="0" ixz="0" iyy="0.000166704" iyz="0" izz="0.000167604"/>
    </inertial>
    <collision name="interceptor__rotor_1_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.1" length="0.005"/>
      </geometry>
    </collision>
    <visual name="interceptor__rotor_1_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://iris_with_standoffs/meshes/iris_prop_ccw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__iris__rotor_2">
    <inertial>
      <mass value="0.025"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="9.75e-06" ixy="0" ixz="0" iyy="0.000166704" iyz="0" izz="0.000167604"/>
    </inertial>
    <collision name="interceptor__rotor_2_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.1" length="0.005"/>
      </geometry>
    </collision>
    <visual name="interceptor__rotor_2_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://iris_with_standoffs/meshes/iris_prop_cw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__iris__rotor_3">
    <inertial>
      <mass value="0.025"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="9.75e-06" ixy="0" ixz="0" iyy="0.000166704" iyz="0" izz="0.000167604"/>
    </inertial>
    <collision name="interceptor__rotor_3_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.1" length="0.005"/>
      </geometry>
    </collision>
    <visual name="interceptor__rotor_3_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://iris_with_standoffs/meshes/iris_prop_cw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__ros_gimbal_small_2d__base_link">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
    <collision name="interceptor__base_col">
      <origin xyz="0.01   0.075 -0.025" rpy="0 0 0"/>
      <geometry>
        <box size="0.1 0.05 0.15"/>
      </geometry>
    </collision>
    <visual name="interceptor__base_main_viz">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://ros_gimbal_small_2d/meshes/base_main.dae" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <visual name="interceptor__base_arm_viz">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://ros_gimbal_small_2d/meshes/base_arm.dae" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
  </link>
  <link name="interceptor__interceptor__ros_gimbal_small_2d__tilt_link">
    <inertial>
      <mass value="0.01"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-05" ixy="0" ixz="0" iyy="1e-05" iyz="0" izz="1e-05"/>
    </inertial>
    <collision name="interceptor__tilt_col">
      <origin xyz="0     0    -0.025" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://ros_gimbal_small_2d/meshes/tilt.dae" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <collision name="interceptor__depth_cam_collision">
      <origin xyz="0.02  0    0.016" rpy="3.14 0   1.57"/>
      <geometry>
        <box size="0.073 0.276 0.072"/>
      </geometry>
    </collision>
    <visual name="interceptor__tilt_viz">
      <origin xyz="0     0    -0.025" rpy="0 0 0"/>
      <geometry>
        <mesh filename="model://ros_gimbal_small_2d/meshes/tilt.dae" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <visual name="interceptor__depth_cam_visual">
      <origin xyz="0.02  0    0.016" rpy="3.14 0   1.57"/>
      <geometry>
        <mesh filename="model://ros_gimbal_small_2d/meshes/kinect.dae" scale="1.0 1.0 1.0"/>
      </geometry>
    </visual>
    <gazebo>
      <sensor name="camera" type="depth">
        <pose>0.02 0 0.036 3.14 0 1.57</pose>
          <update_rate>20</update_rate>
          <camera>
            <horizontal_fov>1.047198</horizontal_fov>
            <image>
              <width>640</width>
              <height>480</height>
              <format>R8G8B8</format>
            </image>
            <clip>
              <near>0.05</near>
              <far>100</far>
            </clip>
          </camera>
          <plugin name="camera_plugin" filename="libgazebo_ros_openni_kinect.so">
            <robotNamespace></robotNamespace>
            <baseline>0.2</baseline>
            <alwaysOn>true</alwaysOn>
            <!-- Keep this zero, update_rate in the parent <sensor> tag
              will control the frame rate. -->
            <updateRate>0.0</updateRate>
            <cameraName>camera_ir</cameraName>
            <imageTopicName>camera/color/image_raw</imageTopicName>
            <cameraInfoTopicName>camera/color/camera_info</cameraInfoTopicName>
            <depthImageTopicName>camera/depth/image_raw</depthImageTopicName>
            <depthImageCameraInfoTopicName>camera/depth/camera_info</depthImageCameraInfoTopicName>
            <pointCloudTopicName>camera/depth/points</pointCloudTopicName>
            <frameName>camera_link</frameName>
            <pointCloudCutoff>0.5</pointCloudCutoff>
            <pointCloudCutoffMax>10.0</pointCloudCutoffMax>
            <distortionK1>0</distortionK1>
            <distortionK2>0</distortionK2>
            <distortionK3>0</distortionK3>
            <distortionT1>0</distortionT1>
            <distortionT2>0</distortionT2>
            <CxPrime>0</CxPrime>
            <Cx>0</Cx>
            <Cy>0</Cy>
            <focalLength>0</focalLength>
            <hackBaseline>0</hackBaseline>
          </plugin>
      </sensor>
    </gazebo>
  </link>
  <gazebo>
   <plugin name="rotor_0_blade_1" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>0.084 0 0</cp>
      <forward>0 1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_0</link_name>
    </plugin>
    <plugin name="rotor_0_blade_2" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>-0.084 0 0</cp>
      <forward>0 -1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_0</link_name>
    </plugin>

    <plugin name="rotor_1_blade_1" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>0.084 0 0</cp>
      <forward>0 1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_1</link_name>
    </plugin>
    <plugin name="rotor_1_blade_2" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>-0.084 0 0</cp>
      <forward>0 -1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_1</link_name>
    </plugin>

    <plugin name="rotor_2_blade_1" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>0.084 0 0</cp>
      <forward>0 -1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_2</link_name>
    </plugin>
    <plugin name="rotor_2_blade_2" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>-0.084 0 0</cp>
      <forward>0 1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_2</link_name>
    </plugin>

    <plugin name="rotor_3_blade_1" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>0.084 0 0</cp>
      <forward>0 -1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_3</link_name>
    </plugin>
    <plugin name="rotor_3_blade_2" filename="libLiftDragPlugin.so">
      <a0>0.3</a0>
      <alpha_stall>1.4</alpha_stall>
      <cla>4.2500</cla>
      <cda>0.10</cda>
      <cma>0.00</cma>
      <cla_stall>-0.025</cla_stall>
      <cda_stall>0.0</cda_stall>
      <cma_stall>0.0</cma_stall>
      <area>0.002</area>
      <air_density>1.2041</air_density>
      <cp>-0.084 0 0</cp>
      <forward>0 1 0</forward>
      <upward>0 0 1</upward>
      <link_name>interceptor__interceptor__iris__rotor_3</link_name>
    </plugin>
    <plugin name="arducopter_plugin" filename="libArduPilotPlugin.so">
      <fdm_addr>127.0.0.1</fdm_addr>
      <fdm_port_in>9012</fdm_port_in>
      <fdm_port_out>9013</fdm_port_out>
      <!--
          Require by APM :
          Only change model and gazebo from XYZ to XY-Z coordinates
      -->
      <modelXYZToAirplaneXForwardZDown>0 0 0 3.141593 0 0</modelXYZToAirplaneXForwardZDown>
      <gazeboXYZToNED>0 0 0 3.141593 0 0</gazeboXYZToNED>
      <imuName>interceptor__interceptor__iris__iris/imu_link__imu_sensor</imuName>
      <connectionTimeoutMaxCount>5</connectionTimeoutMaxCount>
      <control channel="0">
      <!--
          incoming control command [0, 1]
          so offset it by 0 to get [0, 1]
          and divide max target by 1.
          offset = 0
          multiplier = 838 max rpm / 1 = 838
        -->
        <type>VELOCITY</type>
        <offset>0</offset>
        <p_gain>0.20</p_gain>
        <i_gain>0</i_gain>
        <d_gain>0</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>2.5</cmd_max>
        <cmd_min>-2.5</cmd_min>
        <jointName>interceptor__interceptor__iris__rotor_0_joint</jointName>
        <multiplier>838</multiplier>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="1">
        <type>VELOCITY</type>
        <offset>0</offset>
        <p_gain>0.20</p_gain>
        <i_gain>0</i_gain>
        <d_gain>0</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>2.5</cmd_max>
        <cmd_min>-2.5</cmd_min>
        <jointName>interceptor__interceptor__iris__rotor_1_joint</jointName>
        <multiplier>838</multiplier>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="2">
        <type>VELOCITY</type>
        <offset>0</offset>
        <p_gain>0.20</p_gain>
        <i_gain>0</i_gain>
        <d_gain>0</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>2.5</cmd_max>
        <cmd_min>-2.5</cmd_min>
        <jointName>interceptor__interceptor__iris__rotor_2_joint</jointName>
        <multiplier>-838</multiplier>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <control channel="3">
        <type>VELOCITY</type>
        <offset>0</offset>
        <p_gain>0.20</p_gain>
        <i_gain>0</i_gain>
        <d_gain>0</d_gain>
        <i_max>0</i_max>
        <i_min>0</i_min>
        <cmd_max>2.5</cmd_max>
        <cmd_min>-2.5</cmd_min>
        <jointName>interceptor__interceptor__iris__rotor_3_joint</jointName>
        <multiplier>-838</multiplier>
        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>
      </control>
      <!-- <control channel="4">
        <jointName>ros_gimbal_small_2d::tilt_joint</jointName>
        <multiplier>3.14159265</multiplier>
        <offset>-0.5</offset>
        <servo_min>1100</servo_min>
        <servo_max>1900</servo_max>
        <type>COMMAND</type>
        <cmd_topic>/gimbal/cmd_tilt</cmd_topic>
        <p_gain>3</p_gain>
      </control> -->
    </plugin>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/ros_gimbal_2D</robotNamespace>
    </plugin>
  </gazebo>
  <!-- transmission -->
  <transmission name="tilt_control_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="motor1">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="interceptor__interceptor__ros_gimbal_small_2d__tilt_joint">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>
</robot>
